{% comment %}
Expected include variables:
  - tags <Array>
  - divider <String>
  + tagsurl <String>
       - optional
       - this is the base url to link to a tag archive, e.g. "http://www.blog.com/posts" becomes "http://www.blog.com/posts/TAG" for a given tag, 'TAG'
       - if this is not defined, but the site has a value for `jekyll-archives.permalinks.tag`, that will be used instead if it ends with ':name' (problems can occur otherwise!)
{% endcomment %}

{% if include.tagsurl %}
{% capture url %}{{ include.tagsurl }}{% endcapture %}

{% elsif site.jekyll-archives.permalinks.tag and site.jekyll-archives.permalinks.tag contains ':name' %}
{% capture url %}{{ site.url }}{{ site.jekyll-archives.permalinks.tag | remove: ':name' }}{% endcapture %}

{% else %}
{% assign url=nil %}
{% endif %}

<span class="taglist">
    {% for tag in include.tags %}
    {% if url != nil %}<a href="{{ url }}/{{ tag | downcase | slugify }}">{{ tag }}</a>{% else %}<span>{{ tag }}</span>{% endif %}
    {% unless forloop.last %}<span class="tagdivider">{{ include.divider }}</span>{% endunless %}
    {% endfor %}
</span>
